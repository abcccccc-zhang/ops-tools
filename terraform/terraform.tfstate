{
  "version": 4,
  "terraform_version": "1.9.8",
  "serial": 1029,
  "lineage": "bc99581e-740f-605c-38b5-c89016fdf13b",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "agent_user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "086305b51ff0b9a1930bc7cc52e488e7f6de1bf1c433d675cb63ce3cb99099b7",
            "rendered": "#cloud-config\nhostname: k3s-agent-1\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n# ------------------\n# timezone 设置一下时区\n# ------------------\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\ntimezone: Asia/Shanghai\nruncmd:\n  - hostnamectl set-hostname k3s-agent-1\n  - yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n  - sed -i 's+download.docker.com+mirrors.aliyun.com/docker-ce+' /etc/yum.repos.d/docker-ce.repo\n  - yum -y install docker-ce\n  - systemctl start docker\n  - systemctl enable docker\n  - groupadd docker\n  - gpasswd -a kevin docker\n  - chmod a+rw /var/run/docker.sock\n# ------------------\n# packages 安装一些软件\n# ------------------\n# ------------------\n# write some config：写文件\n# ------------------\n# ------------------\n# power_state 在cloud-init完成后重启一次\n# ------------------\n# power_state:\n#     delay: now\n#     mode: reboot\n#     message: Rebooting machine\n#     condition: true\n\n# ------------------\n# final_message\n# ------------------\nfinal_message: |\n  cloud-init has finished\n  version: 1\n  timestamp: $timestamp\n  datasource: $datasource\n  uptime: $uptime\n",
            "template": "#cloud-config\nhostname: ${hostname}\nmanage_etc_hosts: true\nuser: k3s\npassword: ${passwd}\nssh_authorized_keys:\n  - ${pubkey}\nchpasswd:\n  expire: False\nusers:\n  - default\n# ------------------\n# timezone 设置一下时区\n# ------------------\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\ntimezone: Asia/Shanghai\nruncmd:\n  - hostnamectl set-hostname ${hostname}\n  - yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n  - sed -i 's+download.docker.com+mirrors.aliyun.com/docker-ce+' /etc/yum.repos.d/docker-ce.repo\n  - yum -y install docker-ce\n  - systemctl start docker\n  - systemctl enable docker\n  - groupadd docker\n  - gpasswd -a kevin docker\n  - chmod a+rw /var/run/docker.sock\n# ------------------\n# packages 安装一些软件\n# ------------------\n# ------------------\n# write some config：写文件\n# ------------------\n# ------------------\n# power_state 在cloud-init完成后重启一次\n# ------------------\n# power_state:\n#     delay: now\n#     mode: reboot\n#     message: Rebooting machine\n#     condition: true\n\n# ------------------\n# final_message\n# ------------------\nfinal_message: |\n  cloud-init has finished\n  version: 1\n  timestamp: $timestamp\n  datasource: $datasource\n  uptime: $uptime\n",
            "vars": {
              "hostname": "k3s-agent-1",
              "joinip": "192.168.1.167",
              "joinport": "6443",
              "passwd": "123456",
              "pubkey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops",
              "token": "123456"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_file",
      "name": "master_init_user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "0d8e310af0ee513b0bd5e26e7eb6bdc4c5d90949ff11cdc0ad1c0be7f0fcc7aa",
            "rendered": "#cloud-config\nhostname: k3s-master-1\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname k3s-master-1\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=123456 K3S_KUBECONFIG_MODE='644' sh -s - server --cluster-init --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n\n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished\n",
            "template": "#cloud-config\nhostname: ${hostname}\nmanage_etc_hosts: true\nuser: k3s\npassword: ${passwd}\nssh_authorized_keys:\n  - ${pubkey}\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname ${hostname}\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=${token} K3S_KUBECONFIG_MODE='644' sh -s - server --cluster-init --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n\n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished\n",
            "vars": {
              "hostname": "k3s-master-1",
              "passwd": "123456",
              "pubkey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops",
              "token": "123456"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_file",
      "name": "master_join_user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "840cab82e7ddeb71dedcbe04a1d2a0301c4db7fa53e955d56b61085278809712",
            "rendered": "#cloud-config\n#cloud-config\nhostname: k3s-master-2\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname k3s-master-2\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=123456 K3S_KUBECONFIG_MODE='644' sh -s - server --server https://192.168.1.167:6443 --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n  \n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished",
            "template": "#cloud-config\n#cloud-config\nhostname: ${hostname}\nmanage_etc_hosts: true\nuser: k3s\npassword: ${passwd}\nssh_authorized_keys:\n  - ${pubkey}\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname ${hostname}\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=${token} K3S_KUBECONFIG_MODE='644' sh -s - server --server https://${joinip}:${joinport} --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n  \n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished",
            "vars": {
              "hostname": "k3s-master-2",
              "joinip": "192.168.1.167",
              "joinport": "6443",
              "passwd": "123456",
              "pubkey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops",
              "token": "123456"
            }
          },
          "sensitive_attributes": []
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "dde31357352882a07793be8d6ce3b5fdc1f05f30e393bbdcb3ce4ecc898d4108",
            "rendered": "#cloud-config\n#cloud-config\nhostname: k3s-master-3\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname k3s-master-3\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=123456 K3S_KUBECONFIG_MODE='644' sh -s - server --server https://192.168.1.167:6443 --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n  \n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished",
            "template": "#cloud-config\n#cloud-config\nhostname: ${hostname}\nmanage_etc_hosts: true\nuser: k3s\npassword: ${passwd}\nssh_authorized_keys:\n  - ${pubkey}\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname ${hostname}\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=${token} K3S_KUBECONFIG_MODE='644' sh -s - server --server https://${joinip}:${joinport} --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n  \n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished",
            "vars": {
              "hostname": "k3s-master-3",
              "joinip": "192.168.1.167",
              "joinport": "6443",
              "passwd": "123456",
              "pubkey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops",
              "token": "123456"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "agent_user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#cloud-config\nhostname: k3s-agent-1\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n# ------------------\n# timezone 设置一下时区\n# ------------------\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\ntimezone: Asia/Shanghai\nruncmd:\n  - hostnamectl set-hostname k3s-agent-1\n  - yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n  - sed -i 's+download.docker.com+mirrors.aliyun.com/docker-ce+' /etc/yum.repos.d/docker-ce.repo\n  - yum -y install docker-ce\n  - systemctl start docker\n  - systemctl enable docker\n  - groupadd docker\n  - gpasswd -a kevin docker\n  - chmod a+rw /var/run/docker.sock\n# ------------------\n# packages 安装一些软件\n# ------------------\n# ------------------\n# write some config：写文件\n# ------------------\n# ------------------\n# power_state 在cloud-init完成后重启一次\n# ------------------\n# power_state:\n#     delay: now\n#     mode: reboot\n#     message: Rebooting machine\n#     condition: true\n\n# ------------------\n# final_message\n# ------------------\nfinal_message: |\n  cloud-init has finished\n  version: 1\n  timestamp: $timestamp\n  datasource: $datasource\n  uptime: $uptime\n",
            "content_base64": null,
            "content_base64sha256": "CGMFtR/wuaGTC8fMUuSI5/beG/HEM9Z1y2POPLmQmbc=",
            "content_base64sha512": "HgVHD7fOecNSn2IH1yxX8wEKbMhGeSz7EbLl4CWJK8Xu5AaJsFEazDSSh3c/xFDzxHIOYWrZog/w6+F/2h3TRA==",
            "content_md5": "f5a9bd3c023254d6fe55a86c1a5318da",
            "content_sha1": "979d8edddf03f54eb721533e21970b66e672d7d8",
            "content_sha256": "086305b51ff0b9a1930bc7cc52e488e7f6de1bf1c433d675cb63ce3cb99099b7",
            "content_sha512": "1e05470fb7ce79c3529f6207d72c57f3010a6cc846792cfb11b2e5e025892bc5eee40689b0511acc349287773fc450f3c4720e616ad9a20ff0ebe17fda1dd344",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./files/agent_user_data.cfg",
            "id": "979d8edddf03f54eb721533e21970b66e672d7d8",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "data.template_file.agent_user_data"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "master_init_user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#cloud-config\nhostname: k3s-master-1\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname k3s-master-1\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=123456 K3S_KUBECONFIG_MODE='644' sh -s - server --cluster-init --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n\n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished\n",
            "content_base64": null,
            "content_base64sha256": "DY4xCvDuUTsL1eJufra9xMXZCUn/Ec3ArRwL5/D8x6o=",
            "content_base64sha512": "8va/0272ic4v0ucvfZUnFeyu2nZu0gg0DCa2E4Q9rvpEEDEs6e85pKRe7Ap5DiVRif/T3WApOflo8iFlJwSuMA==",
            "content_md5": "ce87c54e4f995490adc159271dd376fd",
            "content_sha1": "f048ec5af1593b068c582e378ddd391e83c35f63",
            "content_sha256": "0d8e310af0ee513b0bd5e26e7eb6bdc4c5d90949ff11cdc0ad1c0be7f0fcc7aa",
            "content_sha512": "f2f6bfd36ef689ce2fd2e72f7d952715ecaeda766ed208340c26b613843daefa4410312ce9ef39a4a45eec0a790e255189ffd3dd602939f968f221652704ae30",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./files/master_init_user_data.cfg",
            "id": "f048ec5af1593b068c582e378ddd391e83c35f63",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "data.template_file.master_init_user_data"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "master_join_user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "content": "#cloud-config\n#cloud-config\nhostname: k3s-master-2\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname k3s-master-2\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=123456 K3S_KUBECONFIG_MODE='644' sh -s - server --server https://192.168.1.167:6443 --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n  \n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished",
            "content_base64": null,
            "content_base64sha256": "hAyrgufd63He3L4EodKgMBxNt/pT6VXVa2EIUniAlxI=",
            "content_base64sha512": "EaSUnq9UNPQR2LFC5PAUHcHRGtQ9vr/GJEAxQ072Z4pXlnWaK1OK+oGXeWGl0emZ7TACRr5jXVuTzL6dBMg7XA==",
            "content_md5": "0055c091c73035fe40721d61bf1615e0",
            "content_sha1": "04754c47be5fa0a5314fbe68dc374c5095b38d32",
            "content_sha256": "840cab82e7ddeb71dedcbe04a1d2a0301c4db7fa53e955d56b61085278809712",
            "content_sha512": "11a4949eaf5434f411d8b142e4f0141dc1d11ad43dbebfc6244031434ef6678a5796759a2b538afa81977961a5d1e999ed300246be635d5b93ccbe9d04c83b5c",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./files/master_join_user_data-0.cfg",
            "id": "04754c47be5fa0a5314fbe68dc374c5095b38d32",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "data.template_file.master_join_user_data"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "content": "#cloud-config\n#cloud-config\nhostname: k3s-master-3\nmanage_etc_hosts: true\nuser: k3s\npassword: 123456\nssh_authorized_keys:\n  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDHwEy8ZcuGSjcy7k4q7wlGhO3KAVTGDnbzjPbQSAIJOQpy1Zj+aHIfNI/W9x54JDje5b6akAgUnweu7KjLk+AMgXZ2EPv0iTJimlmAT7TZNGUjmQnDP8BHey5Vyy6lMeHEIV4KGqin1oboeAbNLpN+gXm143pRyoR4jyykMjRJn5UdHK4NXgXoC8vAiarZ1cg3TNXel16DGVnQJaiG4N5Dvyvcvl64LUEw1y81uqeECbmrM0l+Mc+G4B+iIMDQBq00eq0HzllOFjMZCLgSzBBoz4ik33jlE6ZTLX3FAvotjP97G0JbZ+fbzqdc5/fmr7y9rVPVHCeHRHa2Yt7tKUk/bRiLhqUNQBuajYHg+KnJip3xtzOGdBh4ggA+LPdRcoB9KFUqo9eOeutFoN2Mg621ehsHSclxYxAOjVXagV6/QpVXKAn9l5taJoM5x82SHciMQhZrrRdn4nms3xOO63e0oSBFS2liq18edaqy+iwTHLm4lF7MZCcPoc1MMwSfKqs= devops@devops\nchpasswd:\n  expire: False\nusers:\n  - default\n\nwrite_files:\n- content: |\n    server = \"https://docker.io\"\n    [host.\"http://192.168.1.11:5114\"]\n    capabilities = [\"pull\", \"resolve\",\"push\"]\n    skip_verify = true\n  path: /etc/containerd/certs.d/docker.io/hosts.toml\n  permissions: '0644'\n\nruncmd:\n  - hostnamectl set-hostname k3s-master-3\n  - curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_TOKEN=123456 K3S_KUBECONFIG_MODE='644' sh -s - server --server https://192.168.1.167:6443 --disable=servicelb --disable=traefik\n  - cp /var/lib/rancher/k3s/agent/etc/containerd/config.toml /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - sed -i 's|/var/lib/rancher/k3s/agent/etc/containerd/certs.d|/etc/containerd/certs.d|g' /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n  - systemctl restart k3s\n  - source /usr/share/bash-completion/bash_completion\n  - kubectl completion bash | sudo tee /etc/bash_completion.d/kubectl \u003e /dev/null\n  - sudo chmod a+r /etc/bash_completion.d/kubectl\n  - echo 'alias k=kubectl' \u003e\u003e/etc/bashrc\n  - echo 'complete -o default -F __start_kubectl k' \u003e\u003e/etc/bashrc\n  \n# power_state:\n#   delay: now\n#   mode: reboot\n#   message: Rebooting machine\n#   condition: true\n\nfinal_message: |\n  cloud-init has finished",
            "content_base64": null,
            "content_base64sha256": "3eMTVzUogqB3k76NbOO1/cHwXzDjk7vcs85OzImNQQg=",
            "content_base64sha512": "miX0EhE+BYGUtlqoQcBJMHlD6rReBofY0Ns/zwAgJBq4CT5qGWqNTQrUwMuJbLSs7LkD9aTAUCjFuBlilsYJvA==",
            "content_md5": "dd72aad2634f99dc97f9d100156a6e19",
            "content_sha1": "a748aaaa7a9cf86026f9e4bc0669bb75fa894961",
            "content_sha256": "dde31357352882a07793be8d6ce3b5fdc1f05f30e393bbdcb3ce4ecc898d4108",
            "content_sha512": "9a25f412113e058194b65aa841c049307943eab45e0687d8d0db3fcf0020241ab8093e6a196a8d4d0ad4c0cb896cb4acecb903f5a4c05028c5b8196296c609bc",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./files/master_join_user_data-1.cfg",
            "id": "a748aaaa7a9cf86026f9e4bc0669bb75fa894961",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "data.template_file.master_join_user_data"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "cloud_init_upload",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "7688357176159015115",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.template_file.agent_user_data",
            "data.template_file.master_init_user_data",
            "data.template_file.master_join_user_data",
            "local_file.agent_user_data",
            "local_file.master_init_user_data",
            "local_file.master_join_user_data"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "5133974184954756775",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.template_file.agent_user_data",
            "data.template_file.master_init_user_data",
            "data.template_file.master_join_user_data",
            "local_file.agent_user_data",
            "local_file.master_init_user_data",
            "local_file.master_join_user_data"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "proxmox_vm_qemu",
      "name": "agent",
      "provider": "provider[\"registry.terraform.io/telmate/proxmox\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "additional_wait": 5,
            "agent": 1,
            "agent_timeout": null,
            "args": "",
            "automatic_reboot": true,
            "balloon": 0,
            "bios": "seabios",
            "boot": "order=scsi0;net0;ide0",
            "bootdisk": "",
            "ci_wait": null,
            "cicustom": "user=local:snippets/agent_user_data.yml",
            "cipassword": "",
            "ciupgrade": false,
            "ciuser": "",
            "clone": "cloud-init-k8s-env",
            "clone_wait": 10,
            "cores": 2,
            "cpu": "host",
            "default_ipv4_address": "192.168.1.169",
            "default_ipv6_address": "",
            "define_connection_info": true,
            "desc": "",
            "disk": [],
            "disks": [
              {
                "ide": [
                  {
                    "ide0": [
                      {
                        "cdrom": [],
                        "cloudinit": [
                          {
                            "storage": "nas"
                          }
                        ],
                        "disk": [],
                        "passthrough": []
                      }
                    ],
                    "ide1": [],
                    "ide2": [],
                    "ide3": []
                  }
                ],
                "sata": [],
                "scsi": [
                  {
                    "scsi0": [
                      {
                        "cdrom": [],
                        "cloudinit": [],
                        "disk": [
                          {
                            "asyncio": "",
                            "backup": true,
                            "cache": "",
                            "discard": false,
                            "emulatessd": false,
                            "format": "raw",
                            "id": 0,
                            "iops_r_burst": 0,
                            "iops_r_burst_length": 0,
                            "iops_r_concurrent": 0,
                            "iops_wr_burst": 0,
                            "iops_wr_burst_length": 0,
                            "iops_wr_concurrent": 0,
                            "iothread": false,
                            "linked_disk_id": -1,
                            "mbps_r_burst": 0,
                            "mbps_r_concurrent": 0,
                            "mbps_wr_burst": 0,
                            "mbps_wr_concurrent": 0,
                            "readonly": false,
                            "replicate": false,
                            "serial": "",
                            "size": "32G",
                            "storage": "local-lvm",
                            "wwn": ""
                          }
                        ],
                        "passthrough": []
                      }
                    ],
                    "scsi1": [],
                    "scsi10": [],
                    "scsi11": [],
                    "scsi12": [],
                    "scsi13": [],
                    "scsi14": [],
                    "scsi15": [],
                    "scsi16": [],
                    "scsi17": [],
                    "scsi18": [],
                    "scsi19": [],
                    "scsi2": [],
                    "scsi20": [],
                    "scsi21": [],
                    "scsi22": [],
                    "scsi23": [],
                    "scsi24": [],
                    "scsi25": [],
                    "scsi26": [],
                    "scsi27": [],
                    "scsi28": [],
                    "scsi29": [],
                    "scsi3": [],
                    "scsi30": [],
                    "scsi4": [],
                    "scsi5": [],
                    "scsi6": [],
                    "scsi7": [],
                    "scsi8": [],
                    "scsi9": []
                  }
                ],
                "virtio": []
              }
            ],
            "efidisk": [],
            "force_create": false,
            "force_recreate_on_change_of": null,
            "full_clone": true,
            "hagroup": "",
            "hastate": "",
            "hostpci": [],
            "hotplug": "network,disk,usb",
            "id": "zhang/qemu/169",
            "ipconfig0": "ip=192.168.1.169/24,gw=192.168.1.1",
            "ipconfig1": null,
            "ipconfig10": null,
            "ipconfig11": null,
            "ipconfig12": null,
            "ipconfig13": null,
            "ipconfig14": null,
            "ipconfig15": null,
            "ipconfig2": null,
            "ipconfig3": null,
            "ipconfig4": null,
            "ipconfig5": null,
            "ipconfig6": null,
            "ipconfig7": null,
            "ipconfig8": null,
            "ipconfig9": null,
            "kvm": true,
            "linked_vmid": 0,
            "machine": "",
            "memory": 8192,
            "name": "k3s-agent-1",
            "nameserver": null,
            "network": [
              {
                "bridge": "vmbr0",
                "firewall": false,
                "link_down": false,
                "macaddr": "BC:24:11:22:5A:4B",
                "model": "virtio",
                "mtu": 0,
                "queues": 0,
                "rate": 0,
                "tag": -1
              }
            ],
            "numa": false,
            "onboot": false,
            "os_network_config": null,
            "os_type": "cloud-init",
            "pool": "",
            "protection": false,
            "pxe": null,
            "qemu_os": "l26",
            "reboot_required": false,
            "scsihw": "virtio-scsi-single",
            "searchdomain": null,
            "serial": [],
            "skip_ipv4": false,
            "skip_ipv6": false,
            "smbios": [
              {
                "family": "",
                "manufacturer": "",
                "product": "",
                "serial": "",
                "sku": "",
                "uuid": "48376d10-39e3-47d6-acc1-73e29b407451",
                "version": ""
              }
            ],
            "sockets": 4,
            "ssh_forward_ip": null,
            "ssh_host": "192.168.1.169",
            "ssh_port": "22",
            "ssh_private_key": null,
            "ssh_user": null,
            "sshkeys": "",
            "startup": "",
            "tablet": true,
            "tags": "",
            "target_node": "zhang",
            "target_nodes": null,
            "timeouts": null,
            "unused_disk": [],
            "usb": [],
            "vcpus": 0,
            "vga": [],
            "vm_state": "running",
            "vmid": 169
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "ssh_private_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "cipassword"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWZhdWx0IjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.template_file.agent_user_data",
            "data.template_file.master_init_user_data",
            "data.template_file.master_join_user_data",
            "local_file.agent_user_data",
            "local_file.master_init_user_data",
            "local_file.master_join_user_data",
            "null_resource.cloud_init_upload",
            "proxmox_vm_qemu.master"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "proxmox_vm_qemu",
      "name": "master",
      "provider": "provider[\"registry.terraform.io/telmate/proxmox\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "additional_wait": 5,
            "agent": 1,
            "agent_timeout": null,
            "args": "",
            "automatic_reboot": true,
            "balloon": 0,
            "bios": "seabios",
            "boot": "order=scsi0;net0;ide0",
            "bootdisk": "",
            "ci_wait": null,
            "cicustom": "user=local:snippets/master_init_user_data.yml",
            "cipassword": "",
            "ciupgrade": false,
            "ciuser": "",
            "clone": "cloud-init-k8s-env",
            "clone_wait": 10,
            "cores": 2,
            "cpu": "host",
            "default_ipv4_address": "192.168.1.167",
            "default_ipv6_address": "",
            "define_connection_info": true,
            "desc": "",
            "disk": [],
            "disks": [
              {
                "ide": [
                  {
                    "ide0": [
                      {
                        "cdrom": [],
                        "cloudinit": [
                          {
                            "storage": "nas"
                          }
                        ],
                        "disk": [],
                        "passthrough": []
                      }
                    ],
                    "ide1": [],
                    "ide2": [],
                    "ide3": []
                  }
                ],
                "sata": [],
                "scsi": [
                  {
                    "scsi0": [
                      {
                        "cdrom": [],
                        "cloudinit": [],
                        "disk": [
                          {
                            "asyncio": "",
                            "backup": true,
                            "cache": "",
                            "discard": false,
                            "emulatessd": false,
                            "format": "raw",
                            "id": 0,
                            "iops_r_burst": 0,
                            "iops_r_burst_length": 0,
                            "iops_r_concurrent": 0,
                            "iops_wr_burst": 0,
                            "iops_wr_burst_length": 0,
                            "iops_wr_concurrent": 0,
                            "iothread": false,
                            "linked_disk_id": -1,
                            "mbps_r_burst": 0,
                            "mbps_r_concurrent": 0,
                            "mbps_wr_burst": 0,
                            "mbps_wr_concurrent": 0,
                            "readonly": false,
                            "replicate": false,
                            "serial": "",
                            "size": "32G",
                            "storage": "local-lvm",
                            "wwn": ""
                          }
                        ],
                        "passthrough": []
                      }
                    ],
                    "scsi1": [],
                    "scsi10": [],
                    "scsi11": [],
                    "scsi12": [],
                    "scsi13": [],
                    "scsi14": [],
                    "scsi15": [],
                    "scsi16": [],
                    "scsi17": [],
                    "scsi18": [],
                    "scsi19": [],
                    "scsi2": [],
                    "scsi20": [],
                    "scsi21": [],
                    "scsi22": [],
                    "scsi23": [],
                    "scsi24": [],
                    "scsi25": [],
                    "scsi26": [],
                    "scsi27": [],
                    "scsi28": [],
                    "scsi29": [],
                    "scsi3": [],
                    "scsi30": [],
                    "scsi4": [],
                    "scsi5": [],
                    "scsi6": [],
                    "scsi7": [],
                    "scsi8": [],
                    "scsi9": []
                  }
                ],
                "virtio": []
              }
            ],
            "efidisk": [],
            "force_create": false,
            "force_recreate_on_change_of": null,
            "full_clone": true,
            "hagroup": "",
            "hastate": "",
            "hostpci": [],
            "hotplug": "network,disk,usb",
            "id": "zhang/qemu/170",
            "ipconfig0": "ip=192.168.1.167/24,gw=192.168.1.1",
            "ipconfig1": null,
            "ipconfig10": null,
            "ipconfig11": null,
            "ipconfig12": null,
            "ipconfig13": null,
            "ipconfig14": null,
            "ipconfig15": null,
            "ipconfig2": null,
            "ipconfig3": null,
            "ipconfig4": null,
            "ipconfig5": null,
            "ipconfig6": null,
            "ipconfig7": null,
            "ipconfig8": null,
            "ipconfig9": null,
            "kvm": true,
            "linked_vmid": 0,
            "machine": "",
            "memory": 8192,
            "name": "k3s-master-1",
            "nameserver": null,
            "network": [
              {
                "bridge": "vmbr0",
                "firewall": false,
                "link_down": false,
                "macaddr": "BC:24:11:5E:06:C7",
                "model": "virtio",
                "mtu": 0,
                "queues": 0,
                "rate": 0,
                "tag": -1
              }
            ],
            "numa": false,
            "onboot": false,
            "os_network_config": null,
            "os_type": "cloud-init",
            "pool": "",
            "protection": false,
            "pxe": null,
            "qemu_os": "l26",
            "reboot_required": false,
            "scsihw": "virtio-scsi-single",
            "searchdomain": null,
            "serial": [],
            "skip_ipv4": false,
            "skip_ipv6": false,
            "smbios": [
              {
                "family": "",
                "manufacturer": "",
                "product": "",
                "serial": "",
                "sku": "",
                "uuid": "8652904b-c4ad-4e8a-9708-66b2628b24ff",
                "version": ""
              }
            ],
            "sockets": 4,
            "ssh_forward_ip": null,
            "ssh_host": "192.168.1.167",
            "ssh_port": "22",
            "ssh_private_key": null,
            "ssh_user": null,
            "sshkeys": "",
            "startup": "",
            "tablet": true,
            "tags": "",
            "target_node": "zhang",
            "target_nodes": null,
            "timeouts": null,
            "unused_disk": [],
            "usb": [],
            "vcpus": 0,
            "vga": [],
            "vm_state": "running",
            "vmid": 170
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "ssh_private_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "cipassword"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWZhdWx0IjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.template_file.agent_user_data",
            "data.template_file.master_init_user_data",
            "data.template_file.master_join_user_data",
            "local_file.agent_user_data",
            "local_file.master_init_user_data",
            "local_file.master_join_user_data",
            "null_resource.cloud_init_upload"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "additional_wait": 5,
            "agent": 1,
            "agent_timeout": null,
            "args": "",
            "automatic_reboot": true,
            "balloon": 0,
            "bios": "seabios",
            "boot": "order=scsi0;net0;ide0",
            "bootdisk": "",
            "ci_wait": null,
            "cicustom": "user=local:snippets/master_join_user_data_1.yml",
            "cipassword": "",
            "ciupgrade": false,
            "ciuser": "",
            "clone": "cloud-init-k8s-env",
            "clone_wait": 10,
            "cores": 2,
            "cpu": "host",
            "default_ipv4_address": "",
            "default_ipv6_address": "",
            "define_connection_info": true,
            "desc": "",
            "disk": [],
            "disks": [
              {
                "ide": [
                  {
                    "ide0": [
                      {
                        "cdrom": [],
                        "cloudinit": [
                          {
                            "storage": "nas"
                          }
                        ],
                        "disk": [],
                        "passthrough": []
                      }
                    ],
                    "ide1": [],
                    "ide2": [],
                    "ide3": []
                  }
                ],
                "sata": [],
                "scsi": [
                  {
                    "scsi0": [
                      {
                        "cdrom": [],
                        "cloudinit": [],
                        "disk": [
                          {
                            "asyncio": "",
                            "backup": true,
                            "cache": "",
                            "discard": false,
                            "emulatessd": false,
                            "format": "raw",
                            "id": 0,
                            "iops_r_burst": 0,
                            "iops_r_burst_length": 0,
                            "iops_r_concurrent": 0,
                            "iops_wr_burst": 0,
                            "iops_wr_burst_length": 0,
                            "iops_wr_concurrent": 0,
                            "iothread": false,
                            "linked_disk_id": -1,
                            "mbps_r_burst": 0,
                            "mbps_r_concurrent": 0,
                            "mbps_wr_burst": 0,
                            "mbps_wr_concurrent": 0,
                            "readonly": false,
                            "replicate": false,
                            "serial": "",
                            "size": "32G",
                            "storage": "local-lvm",
                            "wwn": ""
                          }
                        ],
                        "passthrough": []
                      }
                    ],
                    "scsi1": [],
                    "scsi10": [],
                    "scsi11": [],
                    "scsi12": [],
                    "scsi13": [],
                    "scsi14": [],
                    "scsi15": [],
                    "scsi16": [],
                    "scsi17": [],
                    "scsi18": [],
                    "scsi19": [],
                    "scsi2": [],
                    "scsi20": [],
                    "scsi21": [],
                    "scsi22": [],
                    "scsi23": [],
                    "scsi24": [],
                    "scsi25": [],
                    "scsi26": [],
                    "scsi27": [],
                    "scsi28": [],
                    "scsi29": [],
                    "scsi3": [],
                    "scsi30": [],
                    "scsi4": [],
                    "scsi5": [],
                    "scsi6": [],
                    "scsi7": [],
                    "scsi8": [],
                    "scsi9": []
                  }
                ],
                "virtio": []
              }
            ],
            "efidisk": [],
            "force_create": false,
            "force_recreate_on_change_of": null,
            "full_clone": true,
            "hagroup": "",
            "hastate": "",
            "hostpci": [],
            "hotplug": "network,disk,usb",
            "id": "zhang/qemu/168",
            "ipconfig0": "ip=192.168.1.168/24,gw=192.168.1.1",
            "ipconfig1": null,
            "ipconfig10": null,
            "ipconfig11": null,
            "ipconfig12": null,
            "ipconfig13": null,
            "ipconfig14": null,
            "ipconfig15": null,
            "ipconfig2": null,
            "ipconfig3": null,
            "ipconfig4": null,
            "ipconfig5": null,
            "ipconfig6": null,
            "ipconfig7": null,
            "ipconfig8": null,
            "ipconfig9": null,
            "kvm": true,
            "linked_vmid": 0,
            "machine": "",
            "memory": 8192,
            "name": "k3s-master-2",
            "nameserver": null,
            "network": [
              {
                "bridge": "vmbr0",
                "firewall": false,
                "link_down": false,
                "macaddr": "BC:24:11:56:F2:D0",
                "model": "virtio",
                "mtu": 0,
                "queues": 0,
                "rate": 0,
                "tag": -1
              }
            ],
            "numa": false,
            "onboot": false,
            "os_network_config": null,
            "os_type": "cloud-init",
            "pool": "",
            "protection": false,
            "pxe": null,
            "qemu_os": "l26",
            "reboot_required": false,
            "scsihw": "virtio-scsi-single",
            "searchdomain": null,
            "serial": [],
            "skip_ipv4": false,
            "skip_ipv6": false,
            "smbios": [
              {
                "family": "",
                "manufacturer": "",
                "product": "",
                "serial": "",
                "sku": "",
                "uuid": "58994253-ac33-4af9-a7e8-fcfaaa195d36",
                "version": ""
              }
            ],
            "sockets": 4,
            "ssh_forward_ip": null,
            "ssh_host": "",
            "ssh_port": "",
            "ssh_private_key": null,
            "ssh_user": null,
            "sshkeys": "",
            "startup": "",
            "tablet": true,
            "tags": "",
            "target_node": "zhang",
            "target_nodes": null,
            "timeouts": null,
            "unused_disk": [],
            "usb": [],
            "vcpus": 0,
            "vga": [],
            "vm_state": "stopped",
            "vmid": 168
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "ssh_private_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "cipassword"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWZhdWx0IjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.template_file.agent_user_data",
            "data.template_file.master_init_user_data",
            "data.template_file.master_join_user_data",
            "local_file.agent_user_data",
            "local_file.master_init_user_data",
            "local_file.master_join_user_data",
            "null_resource.cloud_init_upload"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "additional_wait": 5,
            "agent": 1,
            "agent_timeout": null,
            "args": "",
            "automatic_reboot": true,
            "balloon": 0,
            "bios": "seabios",
            "boot": "order=scsi0;net0;ide0",
            "bootdisk": "",
            "ci_wait": null,
            "cicustom": "user=local:snippets/master_join_user_data_2.yml",
            "cipassword": "",
            "ciupgrade": false,
            "ciuser": "",
            "clone": "cloud-init-k8s-env",
            "clone_wait": 10,
            "cores": 2,
            "cpu": "host",
            "default_ipv4_address": "",
            "default_ipv6_address": "",
            "define_connection_info": true,
            "desc": "",
            "disk": [],
            "disks": [
              {
                "ide": [
                  {
                    "ide0": [
                      {
                        "cdrom": [],
                        "cloudinit": [
                          {
                            "storage": "nas"
                          }
                        ],
                        "disk": [],
                        "passthrough": []
                      }
                    ],
                    "ide1": [],
                    "ide2": [],
                    "ide3": []
                  }
                ],
                "sata": [],
                "scsi": [
                  {
                    "scsi0": [
                      {
                        "cdrom": [],
                        "cloudinit": [],
                        "disk": [
                          {
                            "asyncio": "",
                            "backup": true,
                            "cache": "",
                            "discard": false,
                            "emulatessd": false,
                            "format": "raw",
                            "id": 0,
                            "iops_r_burst": 0,
                            "iops_r_burst_length": 0,
                            "iops_r_concurrent": 0,
                            "iops_wr_burst": 0,
                            "iops_wr_burst_length": 0,
                            "iops_wr_concurrent": 0,
                            "iothread": false,
                            "linked_disk_id": -1,
                            "mbps_r_burst": 0,
                            "mbps_r_concurrent": 0,
                            "mbps_wr_burst": 0,
                            "mbps_wr_concurrent": 0,
                            "readonly": false,
                            "replicate": false,
                            "serial": "",
                            "size": "32G",
                            "storage": "local-lvm",
                            "wwn": ""
                          }
                        ],
                        "passthrough": []
                      }
                    ],
                    "scsi1": [],
                    "scsi10": [],
                    "scsi11": [],
                    "scsi12": [],
                    "scsi13": [],
                    "scsi14": [],
                    "scsi15": [],
                    "scsi16": [],
                    "scsi17": [],
                    "scsi18": [],
                    "scsi19": [],
                    "scsi2": [],
                    "scsi20": [],
                    "scsi21": [],
                    "scsi22": [],
                    "scsi23": [],
                    "scsi24": [],
                    "scsi25": [],
                    "scsi26": [],
                    "scsi27": [],
                    "scsi28": [],
                    "scsi29": [],
                    "scsi3": [],
                    "scsi30": [],
                    "scsi4": [],
                    "scsi5": [],
                    "scsi6": [],
                    "scsi7": [],
                    "scsi8": [],
                    "scsi9": []
                  }
                ],
                "virtio": []
              }
            ],
            "efidisk": [],
            "force_create": false,
            "force_recreate_on_change_of": null,
            "full_clone": true,
            "hagroup": "",
            "hastate": "",
            "hostpci": [],
            "hotplug": "network,disk,usb",
            "id": "zhang/qemu/171",
            "ipconfig0": "ip=192.168.1.170/24,gw=192.168.1.1",
            "ipconfig1": null,
            "ipconfig10": null,
            "ipconfig11": null,
            "ipconfig12": null,
            "ipconfig13": null,
            "ipconfig14": null,
            "ipconfig15": null,
            "ipconfig2": null,
            "ipconfig3": null,
            "ipconfig4": null,
            "ipconfig5": null,
            "ipconfig6": null,
            "ipconfig7": null,
            "ipconfig8": null,
            "ipconfig9": null,
            "kvm": true,
            "linked_vmid": 0,
            "machine": "",
            "memory": 8192,
            "name": "k3s-master-3",
            "nameserver": null,
            "network": [
              {
                "bridge": "vmbr0",
                "firewall": false,
                "link_down": false,
                "macaddr": "BC:24:11:B8:82:3A",
                "model": "virtio",
                "mtu": 0,
                "queues": 0,
                "rate": 0,
                "tag": -1
              }
            ],
            "numa": false,
            "onboot": false,
            "os_network_config": null,
            "os_type": "cloud-init",
            "pool": "",
            "protection": false,
            "pxe": null,
            "qemu_os": "l26",
            "reboot_required": false,
            "scsihw": "virtio-scsi-single",
            "searchdomain": null,
            "serial": [],
            "skip_ipv4": false,
            "skip_ipv6": false,
            "smbios": [
              {
                "family": "",
                "manufacturer": "",
                "product": "",
                "serial": "",
                "sku": "",
                "uuid": "7e4e4ff4-2ebf-44b2-b31b-5493a26c0834",
                "version": ""
              }
            ],
            "sockets": 4,
            "ssh_forward_ip": null,
            "ssh_host": "",
            "ssh_port": "",
            "ssh_private_key": null,
            "ssh_user": null,
            "sshkeys": "",
            "startup": "",
            "tablet": true,
            "tags": "",
            "target_node": "zhang",
            "target_nodes": null,
            "timeouts": null,
            "unused_disk": [],
            "usb": [],
            "vcpus": 0,
            "vga": [],
            "vm_state": "stopped",
            "vmid": 171
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "cipassword"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "ssh_private_key"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWZhdWx0IjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.template_file.agent_user_data",
            "data.template_file.master_init_user_data",
            "data.template_file.master_join_user_data",
            "local_file.agent_user_data",
            "local_file.master_init_user_data",
            "local_file.master_join_user_data",
            "null_resource.cloud_init_upload"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
